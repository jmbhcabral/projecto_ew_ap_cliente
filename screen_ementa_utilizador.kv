#:import AnimatedAsyncImage utils.image_utils.AnimatedAsyncImage
#:set color1 "#DD7835"

<ScreenEmentaUtilizador>:
    recycleView: recycleView
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            size: self.size
            pos: self.pos
    BoxLayout:
        orientation: "vertical"
        spacing: dp(10)
        
        TitleLabel:
            text:"Ementa"
        BoxLayout:
            # padding: dp(20)
            spacing: dp(10)
            orientation: "vertical"
            RecycleView:
                id: recycleView
                viewclass: "ProdutoEmentaWidget"

                RecycleBoxLayout:
                    default_size: None, dp(400)
                    default_size_hint: 1, None
                    size_hint_y: None
                    height: self.minimum_height
                    orientation: "vertical"
                    spacing: dp(20)


<TitleLabel@FitLabel>:
    font_size: dp(22)
    bold: True
    padding: dp(16), dp(3)
    canvas.before:
        Color:
            rgb: utils.get_color_from_hex(color1)
        Rectangle:
            pos: self.pos
            size: self.size

<FitLabel@Label>:
    size_hint: None, None
    size: self.texture_size

<ProdutoEmentaWidget>:
    BoxLayout:
        orientation: "vertical"
        size_hint_y: None
        padding: dp(10)
        spacing: dp(10)

        AnimatedAsyncImage:
            id: imagem
            source: root.imagem
            size_hint_y: None
            height: dp(300) #ajuste a proporção conforme necessário
            keep_ratio: True
            allow_stretch: True
            # canvas.after:
                # Color:
                    # rgba: 0, 0, 1, 1
                # Rectangle:
                    # pos: self.pos
                    # size: self.size

        MDLabel:
            id: nome
            text: root.nome
            font_style: "H5"
            size_hint_y: None
            height: self.texture_size[1]
            text_size: self.width, None
            # canvas.after:
                # Color:
                    # rgba: 0, 1, 0, 1
                # Rectangle:
                    # pos: self.pos
                    # size: self.size

        BoxLayout:
            orientation: "horizontal"
            size_hint_y: None
            height: descricao_curta.height
            MDLabel:
                id: descricao_curta
                text: root.descricao_curta
                font_style: "Body1"
                halign: "left"
                valign: "top"
                size_hint_x: 0.75
                size_hint_y: None
                height: self.texture_size[1]
                text_size: self.width, None
                # canvas.after:
                    # Color:
                        # rgba: 1, 0, 0, 1
                    # Rectangle:
                        # pos: self.pos
                        # size: self.size


            MDLabel:
                id: preco
                text: str(root.preco)+"€"
                font_style: "H6"
                halign: "right"
                size_hint_x: 0.25
                size_hint_y: None
                height: self.texture_size[1]
                # canvas.after:
                    # Color:
                        # rgba: 1, 1, 1, 1
                    # Rectangle:
                        # pos: self.pos
                        # size: self.size
