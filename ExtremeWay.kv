#:import MDSeparator kivymd.uix.card.MDSeparator
#:include screen_inicio.kv
#:include screen_acerca_de.kv
#:include screen_programa_fidelidade.kv
#:include screen_menu.kv
#:include screen_login.kv
#:include screen_utilizador_home.kv
#:include screen_qrcode.kv
#:include screen_dados_pessoais.kv
#:include screen_change_password.kv
#:include screen_ementa_utilizador.kv
#:include screen_registar.kv
#:include screen_suporte.kv

# cor ambar - 1.0, 0.749, 0.0, 1
# cor verde oliva - 0.502, 0.502, 0.0, 1


<Content>:
    app: app
    ScrollView:
        BoxLayout:
            orientation: "vertical"
            size_hint_y: None
            height: self.minimum_height

            MDList:
                OneLineListItem:
                    text: "Área Cliente" if app.is_logged_in else 'Login/Registar'
                    # size_hint_y: 1
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_utilizador_home" if app.is_logged_in else 'screen_clientes'
            
                OneLineListItem:
                    text: "Dados Pessoais" if app.is_logged_in else ""
                    # size_hint_y: None if not app.is_logged_in else 1
                    height: 0 if not app.is_logged_in else dp(48)
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_dados_pessoais"
                OneLineListItem:
                    text: "Alterar Password" if app.is_logged_in else ""
                    # size_hint_y: None if not app.is_logged_in else 1
                    height: 0 if not app.is_logged_in else dp(48)
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_change_password"

                OneLineListItem:
                    text: "Ementa" if app.is_logged_in else ""
                    # size_hint_y: None if not app.is_logged_in else 1
                    height: 0 if not app.is_logged_in else dp(48)
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_ementa_utilizador"

                OneLineListItem:
                    text: "QrCode" if app.is_logged_in else ""
                    # size_hint_y: None if not app.is_logged_in else 1
                    height: 0 if not app.is_logged_in else dp(48)
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_qrcode"
                
                OneLineListItem:
                    text: "Inicio"
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_inicio"
                
                OneLineListItem:
                    text: "Acerca de nós"
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_acerca_de"
                        
                OneLineListItem:
                    text: "Menu"
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_menu"
                        
                OneLineListItem:
                    text: "Programa Fidelidade"
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_programa_fidelidade"
                OneLineListItem:
                    text: "Suporte"
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.manager.current = "screen_suporte"
                OneLineListItem:
                    text: "Logout" if app.is_logged_in else ""
                    on_release:
                        root.nav_drawer.set_state("close")
                        root.logout()
            Label:
                size_hint_y: .1

<MenuScreen>:
    Screen:
        MDTopAppBar:
            pos_hint: {"top": 1}
            title: "Extreme Way"
            elevation: 8
            left_action_items: [["menu", lambda x: nav_drawer.set_state("open")]]
            right_action_items: [[app.login_icon, lambda x: app.toggle_login()]]
        MDNavigationLayout:
            ScreenManager:
                id: screen_manager
                ScreenInicio:
                    name: "screen_inicio"
                    size_hint: 1, 0.9
                ScreenAcercaDe:
                    name: "screen_acerca_de"
                    size_hint: 1, 0.9
                ScreenProgramaFidelidade:
                    name: "screen_programa_fidelidade"
                    size_hint: 1, 0.9
                ScreenSuporte:
                    name: "screen_suporte"
                    size_hint: 1, 0.9
                Screen:
                    name: "screen_menu"
                    BoxLayout:
                        orientation: 'vertical'  # ou 'horizontal', dependendo do layout desejado
                        pos_hint: {'top': 0.9}
                        size_hint_y: 0.9 
                        MainWidget:
                            size_hint: 1, 0.9  # Ajuste conforme necessário
                LoginScreen:
                    name: "screen_clientes"
                    size_hint: 1, 0.9
                UtilizadorHomeScreen:
                    name: "screen_utilizador_home"
                    size_hint: 1, 0.9
                RegistarScreen:
                    name: "screen_registar"
                    size_hint: 1, 0.9
                ScreenQRCode:
                    name: "screen_qrcode"
                    size_hint: 1, 0.9
                ScreenDadosPessoais:
                    name: "screen_dados_pessoais"
                    size_hint: 1, 0.9
                ScreenChangePassword:
                    name: "screen_change_password"
                    size_hint: 1, 0.9
                ScreenEmentaUtilizador:
                    name: "screen_ementa_utilizador"
                    size_hint: 1, 0.9  # Ajuste conforme necessário
                    
        MDNavigationDrawer:
            id: nav_drawer
            radius: (0, 16, 16, 0)
            md_bg_color: 0.502, 0.502, 0.0, .8
            Content:
                manager: screen_manager
                nav_drawer: nav_drawer

