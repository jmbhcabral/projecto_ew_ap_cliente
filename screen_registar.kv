
<ClickableTextFieldRound>:
    
    size_hint_y: None
    height: password_label.height

    MDTextField:
        line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
        line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
        error_color: (1, 0, 0, 1)  # Vermelho
        id: password_label
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        font_size: dp(20)
        padding_y: dp(10)

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: password_label.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            password_label.password = False if password_label.password is True else True

<ClickableTextFieldRound2>:
    size_hint_y: None
    height: password2_label.height

    MDTextField:
        line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
        line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
        error_color: (1, 0, 0, 1)  # Vermelho
        id: password2_label
        hint_text: root.hint_text
        text: root.text
        password: True
        icon_left: "key-variant"
        font_size: dp(20)
        padding_y: dp(10)

    MDIconButton:
        icon: "eye-off"
        pos_hint: {"center_y": .5}
        pos: password2_label.width - self.width + dp(8), 0
        theme_text_color: "Hint"
        on_release:
            self.icon = "eye" if self.icon == "eye-off" else "eye-off"
            password2_label.password = False if password2_label.password is True else True

<ClickableDateField>:
    size_hint_y: None
    height: data_nascimento_label.height

    MDTextField:
        line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
        line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
        error_color: (1, 0, 0, 1)  # Vermelho
        id: data_nascimento_label
        hint_text: root.hint_text
        text: root.text
        readonly: True
        font_size: dp(20)
        padding_y: dp(10)
        date_format: "dd/mm/yyyy"
        validator: "date"

    MDIconButton:
        icon: "calendar-today"
        pos_hint: {"center_y": .5}
        pos: data_nascimento_label.width - self.width + dp(8), 0
        on_release: root.open_date_picker()    


<RegistarScreen>:
    MDScrollView:
        BoxLayout:
            orientation: "vertical"
            spacing: dp(20)
            size_hint_y: None  # Isso é crucial
            height: self.minimum_height  # Isso define a altura para o conteúdo
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            
            MDLabel:
                text: "Registar"
                font_size: dp(40)
                bold: True
                halign: "center"
                size_hint_x: 0.8
                size_hint_y: None
                height: self.texture_size[1]
                padding_y: dp(20)
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: nome_label
                hint_text: "Nome"
                icon_right: "account"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                font_size: dp(20)
                padding_y: dp(10)
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: apelido_label
                hint_text: "Apelido"
                helper_text: "Digite o seu apelido."
                icon_right: "account"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                font_size: dp(20)
                padding_y: dp(10)
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: username_label
                hint_text: "Username"
                helper_text: "Escolha um nome de utilizador."  # Mensagem de erro será definida pelo Python
                helper_text_mode: "on_error"  # Mostra o helper_text quando o campo está em erro
                on_text: root.reset_field('username_label', 'Escolha um nome de utilizador.')
                icon_right: "account"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                font_size: dp(20)
                padding_y: dp(10)
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: email_label
                hint_text: "Email"
                helper_text_mode: "on_error"  # Mostra o helper_text quando o campo está em erro
                helper_text: "user@gmail.com"
                on_text: root.reset_field('email_label', 'user@gmail.com')
                validator: "email"
                icon_right: "email"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                font_size: dp(20)
                padding_y: dp(10)
            ClickableTextFieldRound:
                id: password_round
                size_hint_x: 0.8
                hint_text: "Password"
                helper_text_mode: "on_error"
                on_text: root.reset_field('password_label', 'Digite uma password.')
                pos_hint: {"center_x": .5, "center_y": .5}
            ClickableTextFieldRound2:
                id: password2_round
                size_hint_x: 0.8
                hint_text: "Confirmar password"
                helper_text_mode: "on_error"
                on_text: root.reset_field('password_label', 'Confirmar password.')
                pos_hint: {"center_x": .5, "center_y": .5}
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: telemovel_label
                input_filter: "int"
                hint_text: "Telemóvel"
                helper_text_mode: "on_error"
                helper_text: "Número telemóvel"
                on_text: root.reset_field('telemovel_label', 'Número telemóvel')
                icon_right: "phone"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                font_size: dp(20)
                padding_y: dp(10)
            ClickableDateField:
                id: clickable_date
                size_hint_x: 0.8
                hint_text: "Data de Nascimento"
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
            MDTextField:
                line_color_normal: self.error_color if self.error else (0.5, 0.5, 0.5, 1)
                line_color_focus: self.error_color if self.error else (0, 0, 0, 1)
                error_color: (1, 0, 0, 1)  # Vermelho
                id: drop_item
                hint_text: "Selecione uma opção"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                readonly: True
                on_focus: if self.focus: root.manager.get_screen('screen_registar').menu_list()
            MDRaisedButton:
                text: "Registar"
                size_hint_x: 0.8
                pos_hint:{"center_x": 0.5, "center_y": 0.5}
                on_release: root.register_user()



